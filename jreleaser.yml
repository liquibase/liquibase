environment:
  properties:
    jdkPathPrefix: 'target/jdks'
    jdkFilePrefix: 'zulu17.32.13-ca-jdk17.0.2'
    artifactsDir: out/jreleaser/assemble/liquibase/jpackage

project:
  name: liquibase
  description: Main Liquibase Source
  longDescription: Main Liquibase Source
  links:
    homepage: https://www.liquibase.org/
  authors:
    - Liquibase
  license: APACHE-2.0
  inceptionYear: 2023
  stereotype: cli
  java:
    version: 11
    groupId: org.liquibase
    artifactId: liquibase
    mainClass: liquibase.integration.commandline.LiquibaseLauncher

assemble:
  jlink:
    liquibase-jink:
      active: ALWAYS
      exported: false
      imageName: 'liquibase-{{projectVersion}}'
      executable: liquibase
      targetJdks:
        - path: '{{jdkPathPrefix}}/zulu17LinuxIntel/{{jdkFilePrefix}}-linux_x64'
          platform: 'linux-x86_64'
      mainJar:
        path: 'target/liquibase-{{projectVersion}}.jar'

  jpackage:
    liquibase:
      active: ALWAYS
      jlink: liquibase-jink
      attachPlatform: true
      exported: false
      applicationPackage:
        appName: liquibase
        appVersion: '{{projectVersionNumber}}'
        vendor: JReleaser
      linux:
        types: [deb,rpm]
        maintainer: jreleaser@kordamp.org

distributions:
  liquibase:
    type: NATIVE_PACKAGE
    artifacts:
      - path: '{{artifactsDir}}/{{distributionName}}_{{projectVersionNumber}}-1_amd64.deb'
        platform: 'linux-x86_64'
      - path: '{{artifactsDir}}/{{distributionName}}-{{projectVersionNumber}}-1.x86_64.rpm'
        platform: 'linux-x86_64'